{"version":3,"file":"ExpoAppleAuthenticationButton.web.js","sourceRoot":"","sources":["../src/ExpoAppleAuthenticationButton.web.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AACzC,OAAO,EAEL,8BAA8B,EAC9B,6BAA6B,GAC9B,MAAM,6BAA6B,CAAC;AAErC,MAAM,MAAM,GAAG;IACb,WAAW,EAAE,aAAa;IAC1B,KAAK,EAAE,UAAU;IACjB,cAAc,EAAE,gBAAgB;IAChC,KAAK,EAAE,SAAS;IAChB,KAAK,EAAE,SAAS;IAChB,WAAW,EAAE,IAAI;CAClB,CAAC;AAEF,SAAS,IAAI;IACX,MAAM,QAAQ,GAAsB,EAAE,CAAC;IACvC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE;QAC9C,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC/C,OAAO,CAAC,YAAY,CAAC,MAAM,EAAE,kBAAkB,GAAG,EAAE,CAAC,CAAC;QACtD,OAAO,CAAC,YAAY,CAAC,SAAS,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;QAClD,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACnC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC;IACH,OAAO,GAAG,EAAE;QACV,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;IAC5D,CAAC,CAAC;AACJ,CAAC;AAED,SAAS,6BAA6B,CAAC,KAAqC;IAC1E,MAAM,WAAW,GAAG;QAClB,CAAC,8BAA8B,CAAC,KAAK,CAAC,EAAE,EAAE,YAAY,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE;QACvF,CAAC,8BAA8B,CAAC,KAAK,CAAC,EAAE,EAAE,YAAY,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE;QACvF,CAAC,8BAA8B,CAAC,aAAa,CAAC,EAAE,EAAE,YAAY,EAAE,OAAO,EAAE,aAAa,EAAE,IAAI,EAAE;KAC/F,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IACrB,MAAM,UAAU,GAAG;QACjB,CAAC,6BAA6B,CAAC,QAAQ,CAAC,EAAE,UAAU;QACpD,CAAC,6BAA6B,CAAC,OAAO,CAAC,EAAE,SAAS;QAClD,CAAC,6BAA6B,CAAC,OAAO,CAAC,EAAE,SAAS;KACnD,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IACpB,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,IAAI,EAAE,CAAC;IAChB,CAAC,EAAE,EAAE,CAAC,CAAC;IACP,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACnD,SAAS,CAAC,GAAG;YACX,sFAAsF,CAAC;QACzF,SAAS,CAAC,IAAI,GAAG,iBAAiB,CAAC;QACnC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QACrC,OAAO,GAAG,EAAE;YACV,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QACvC,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,KAAK,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC;IACpC,OAAO,CACL,6BACE,GAAG,EAAE,GAAG,KAAK,CAAC,WAAW,EAAE;QAC3B,aAAa;QACb,KAAK,EAAE,KAAK,CAAC,KAAK,EAClB,EAAE,EAAC,gBAAgB,KACf,WAAW,eACJ,UAAU,GACrB,CACH,CAAC;AACJ,CAAC;AAED,eAAe,6BAA6B,CAAC","sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  AppleAuthenticationButtonProps,\n  AppleAuthenticationButtonStyle,\n  AppleAuthenticationButtonType,\n} from './AppleAuthentication.types';\n\nconst config = {\n  'client-id': '[CLIENT_ID]',\n  scope: '[SCOPES]',\n  'redirect-uri': '[REDIRECT_URI]',\n  state: '[STATE]',\n  nonce: '[NONCE]',\n  'use-popup': true,\n};\n\nfunction load() {\n  const metaTags: HTMLMetaElement[] = [];\n  Object.entries(config).forEach(([key, value]) => {\n    const metaTag = document.createElement('meta');\n    metaTag.setAttribute(`name`, `appleid-signin-${key}`);\n    metaTag.setAttribute(`content`, value.toString());\n    document.head.appendChild(metaTag);\n    metaTags.push(metaTag);\n  });\n  return () => {\n    metaTags.forEach((tag) => document.head.removeChild(tag));\n  };\n}\n\nfunction ExpoAppleAuthenticationButton(props: AppleAuthenticationButtonProps) {\n  const buttonProps = {\n    [AppleAuthenticationButtonStyle.BLACK]: { 'data-color': 'black', 'data-border': false },\n    [AppleAuthenticationButtonStyle.WHITE]: { 'data-color': 'white', 'data-border': false },\n    [AppleAuthenticationButtonStyle.WHITE_OUTLINE]: { 'data-color': 'white', 'data-border': true },\n  }[props.buttonStyle];\n  const buttonType = {\n    [AppleAuthenticationButtonType.CONTINUE]: 'continue',\n    [AppleAuthenticationButtonType.SIGN_IN]: 'sign-in',\n    [AppleAuthenticationButtonType.SIGN_UP]: 'sign-up',\n  }[props.buttonType];\n  useEffect(() => {\n    return load();\n  }, []);\n  useEffect(() => {\n    const scriptTag = document.createElement('script');\n    scriptTag.src =\n      'https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js';\n    scriptTag.type = 'text/javascript';\n    document.head.appendChild(scriptTag);\n    return () => {\n      document.head.removeChild(scriptTag);\n    };\n  }, [props.buttonStyle, buttonType]);\n  return (\n    <div\n      key={`${props.buttonStyle}`}\n      // @ts-ignore\n      style={props.style}\n      id=\"appleid-signin\"\n      {...buttonProps}\n      data-type={buttonType}\n    />\n  );\n}\n\nexport default ExpoAppleAuthenticationButton;\n"]}